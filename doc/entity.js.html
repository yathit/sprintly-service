<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: sprintly/entity.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"Sprint.ly offline service","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Sprint.ly offline service</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="sprintly">
            <span class="title">
                <a href="sprintly.html">sprintly</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="sprintly.EventType"><a href="sprintly.html#EventType">EventType</a></li>
            
                <li data-name="sprintly.products"><a href="sprintly.html#products">products</a></li>
            
                <li data-name="sprintly.service"><a href="sprintly.html#service">service</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="sprintly.login"><a href="sprintly.html#login">login</a></li>
            
                <li data-name="sprintly.run"><a href="sprintly.html#run">run</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="sprintly.Entity">
            <span class="title">
                <a href="sprintly.Entity.html">sprintly.Entity</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="sprintly.Entity#entity"><a href="sprintly.Entity.html#entity">entity</a></li>
            
                <li data-name="sprintly.Entity#name"><a href="sprintly.Entity.html#name">name</a></li>
            
                <li data-name="sprintly.Entity#product"><a href="sprintly.Entity.html#product">product</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="sprintly.Entity#onChanged"><a href="sprintly.Entity.html#onChanged">onChanged</a></li>
            
                <li data-name="sprintly.Entity#setProduct"><a href="sprintly.Entity.html#setProduct">setProduct</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="sprintly.Product">
            <span class="title">
                <a href="sprintly.Product.html">sprintly.Product</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="sprintly.Product.EventObject"><a href="sprintly.Product.html#EventObject">EventObject</a></li>
            
                <li data-name="sprintly.Product.schema"><a href="sprintly.Product.html#schema">schema</a></li>
            
                <li data-name="sprintly.Product#db"><a href="sprintly.Product.html#db">db</a></li>
            
                <li data-name="sprintly.Product#onReady"><a href="sprintly.Product.html#onReady">onReady</a></li>
            
                <li data-name="sprintly.Product#product"><a href="sprintly.Product.html#product">product</a></li>
            
                <li data-name="sprintly.Product#refactoryPeriod"><a href="sprintly.Product.html#refactoryPeriod">refactoryPeriod</a></li>
            
                <li data-name="sprintly.Product#service"><a href="sprintly.Product.html#service">service</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="sprintly.Product#add"><a href="sprintly.Product.html#add">add</a></li>
            
                <li data-name="sprintly.Product#dispatchEvent"><a href="sprintly.Product.html#dispatchEvent">dispatchEvent</a></li>
            
                <li data-name="sprintly.Product#dispose"><a href="sprintly.Product.html#dispose">dispose</a></li>
            
                <li data-name="sprintly.Product#get"><a href="sprintly.Product.html#get">get</a></li>
            
                <li data-name="sprintly.Product#list"><a href="sprintly.Product.html#list">list</a></li>
            
                <li data-name="sprintly.Product#listen"><a href="sprintly.Product.html#listen">listen</a></li>
            
                <li data-name="sprintly.Product#put"><a href="sprintly.Product.html#put">put</a></li>
            
                <li data-name="sprintly.Product#remove"><a href="sprintly.Product.html#remove">remove</a></li>
            
                <li data-name="sprintly.Product#request"><a href="sprintly.Product.html#request">request</a></li>
            
                <li data-name="sprintly.Product#unlisten"><a href="sprintly.Product.html#unlisten">unlisten</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="sprintly.Service">
            <span class="title">
                <a href="sprintly.Service.html">sprintly.Service</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="sprintly.Service.BASE_URL"><a href="sprintly.Service.html#BASE_URL">BASE_URL</a></li>
            
                <li data-name="sprintly.Service#authHeader"><a href="sprintly.Service.html#authHeader">authHeader</a></li>
            
                <li data-name="sprintly.Service#products"><a href="sprintly.Service.html#products">products</a></li>
            
                <li data-name="sprintly.Service#username"><a href="sprintly.Service.html#username">username</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="sprintly.Service#getProfile"><a href="sprintly.Service.html#getProfile">getProfile</a></li>
            
                <li data-name="sprintly.Service#listProducts"><a href="sprintly.Service.html#listProducts">listProducts</a></li>
            
                <li data-name="sprintly.Service#login"><a href="sprintly.Service.html#login">login</a></li>
            
                <li data-name="sprintly.Service#request"><a href="sprintly.Service.html#request">request</a></li>
            
                <li data-name="sprintly.Service#setProfile"><a href="sprintly.Service.html#setProfile">setProfile</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="entity.js.html">Source: sprintly/entity.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileOverview Sprintly Entity.
 *
 * @author kyawtun@yathit.com (Kyaw Tun)
 */



/**
 * Sprintly Entity.
 *
 * Represent spirnt.ly entities, such as, Items, Comments, etc as available in
 * [the sprint.ly API]{@link https://sprintly.uservoice.com/knowledgebase/topics/15784-api}.
 * @param {name} name entity name
 * @constructor
 * @disposible
 */
sprintly.Entity = function(name) {
  /**
   * @final
   * @type {name}
   */
  this.name = name;
  /**
   * @protected
   * @type {sprintly.Product}
   */
  this.product = null;
  /**
   * @protected
   * @type {ydn.db.sync.Entity}
   */
  this.entity = null;

  /**
   * Entity update listener key.
   * @type {null}
   * @private
   */
  this.listenerKey_ = null;
};


/**
 * Set target product.
 * This will initiate updating entity.
 * @param {sprintly.Product} product
 */
sprintly.Entity.prototype.setProduct = function(product) {
  if (this.product) {
    this.product.unlisten(this.listenerKey_);
  }
  this.product = product;
  this.listenerKey_ = this.product.listen(this.onUpdate_, this);
  this.entity = new ydn.db.sync.Entity(this.product, this.name, this.product.db);
  this.update();
};


sprintly.Entity.prototype.update = function() {
  var last = localStorage.getItem(this.product.product.id + '-' + this.name + '-last-update');

};


/**
 * Listen entity update event.
 * @param {sprintly.Product.EventObject} obj
 * @private
 */
sprintly.Entity.prototype.onUpdate_ = function(obj) {

};


/**
 * Fetch data.
 * @param {string=} token
 * @private
 */
sprintly.Entity.prototype.fetch_ = function(token) {
  this.entity.update().always(function(cnt) {
    if (cnt > 0) {
      this.onChanged();
    }
  }, this);
};


/**
 * Handle on change event.
 */
sprintly.Entity.prototype.onChanged = function() {};


sprintly.Entity.prototype.dispose = function() {
  if (this.entity) {
    this.entity = null;
    this.product = null;
  }
};

</code></pre>
        </article>
    </section>





        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Sun Jul 13 2014 08:57:36 GMT+0800 (SGT)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
